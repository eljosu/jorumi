# JORUMI - Diagramas de Arquitectura

## ğŸ“ Diagrama 1: Arquitectura General del Sistema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                         â”‚
â”‚                    SERVIDOR AUTORITATIVO (Node.js)                      â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚                 GameEngine (Motor de Reglas Puro)                â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚  â€¢ Estado inmutable (GameState)                                 â”‚   â”‚
â”‚  â”‚  â€¢ ValidaciÃ³n de acciones (validateAction)                      â”‚   â”‚
â”‚  â”‚  â€¢ AplicaciÃ³n de reglas (applyAction)                           â”‚   â”‚
â”‚  â”‚  â€¢ RNG deterministico (seed)                                    â”‚   â”‚
â”‚  â”‚  â€¢ Historial de acciones (replay)                               â”‚   â”‚
â”‚  â”‚  â€¢ GestiÃ³n de fases (PhaseMachine)                              â”‚   â”‚
â”‚  â”‚  â€¢ Dados y aleatoriedad (DiceManager)                           â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â”‚                                              â”‚
â”‚                          â†•                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚              GameRoom (Sala de Juego Individual)                 â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚  â€¢ Una instancia de GameEngine por sala                         â”‚   â”‚
â”‚  â”‚  â€¢ Lista de jugadores conectados                                â”‚   â”‚
â”‚  â”‚  â€¢ Estado de la sala (waiting/in_progress/finished)             â”‚   â”‚
â”‚  â”‚  â€¢ ValidaciÃ³n de turnos y roles                                 â”‚   â”‚
â”‚  â”‚  â€¢ GeneraciÃ³n de eventos                                        â”‚   â”‚
â”‚  â”‚  â€¢ AsignaciÃ³n de roles (HUMAN/ALIEN)                            â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â”‚                                              â”‚
â”‚                          â†•                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚              RoomManager (Gestor de Salas)                       â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚  â€¢ GestiÃ³n de mÃºltiples GameRooms                               â”‚   â”‚
â”‚  â”‚  â€¢ Matchmaking (buscar salas disponibles)                       â”‚   â”‚
â”‚  â”‚  â€¢ CreaciÃ³n y destrucciÃ³n de salas                              â”‚   â”‚
â”‚  â”‚  â€¢ Limpieza de salas inactivas                                  â”‚   â”‚
â”‚  â”‚  â€¢ EstadÃ­sticas del servidor                                    â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â”‚                                              â”‚
â”‚                          â†•                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚         SocketServer (Express + Socket.IO)                       â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚  â€¢ GestiÃ³n de conexiones WebSocket                              â”‚   â”‚
â”‚  â”‚  â€¢ Routing de mensajes a GameRooms                              â”‚   â”‚
â”‚  â”‚  â€¢ Broadcast a jugadores (rooms)                                â”‚   â”‚
â”‚  â”‚  â€¢ ValidaciÃ³n de mensajes del cliente                           â”‚   â”‚
â”‚  â”‚  â€¢ Manejo de reconexiones                                       â”‚   â”‚
â”‚  â”‚  â€¢ HTTP endpoints (health, stats)                               â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â”‚                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â†• WebSocket (Socket.IO)
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â†“                               â†“               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   ...
â”‚                      â”‚       â”‚                      â”‚
â”‚   CLIENTE 1          â”‚       â”‚   CLIENTE 2          â”‚
â”‚                      â”‚       â”‚                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ SocketClient   â”‚  â”‚       â”‚  â”‚ SocketClient   â”‚  â”‚
â”‚  â”‚                â”‚  â”‚       â”‚  â”‚                â”‚  â”‚
â”‚  â”‚ â€¢ ConexiÃ³n WS  â”‚  â”‚       â”‚  â”‚ â€¢ ConexiÃ³n WS  â”‚  â”‚
â”‚  â”‚ â€¢ EnvÃ­o msgs   â”‚  â”‚       â”‚  â”‚ â€¢ EnvÃ­o msgs   â”‚  â”‚
â”‚  â”‚ â€¢ Callbacks    â”‚  â”‚       â”‚  â”‚ â€¢ Callbacks    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚       â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â†•              â”‚       â”‚       â†•              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ NetworkStore   â”‚  â”‚       â”‚  â”‚ NetworkStore   â”‚  â”‚
â”‚  â”‚   (Zustand)    â”‚  â”‚       â”‚  â”‚   (Zustand)    â”‚  â”‚
â”‚  â”‚                â”‚  â”‚       â”‚  â”‚                â”‚  â”‚
â”‚  â”‚ â€¢ gameState    â”‚  â”‚       â”‚  â”‚ â€¢ gameState    â”‚  â”‚
â”‚  â”‚ â€¢ players      â”‚  â”‚       â”‚  â”‚ â€¢ players      â”‚  â”‚
â”‚  â”‚ â€¢ roomInfo     â”‚  â”‚       â”‚  â”‚ â€¢ roomInfo     â”‚  â”‚
â”‚  â”‚ â€¢ sendAction() â”‚  â”‚       â”‚  â”‚ â€¢ sendAction() â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚       â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â†•              â”‚       â”‚       â†•              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   React UI     â”‚  â”‚       â”‚  â”‚   React UI     â”‚  â”‚
â”‚  â”‚                â”‚  â”‚       â”‚  â”‚                â”‚  â”‚
â”‚  â”‚ â€¢ GameBoard    â”‚  â”‚       â”‚  â”‚ â€¢ GameBoard    â”‚  â”‚
â”‚  â”‚ â€¢ GameHUD      â”‚  â”‚       â”‚  â”‚ â€¢ GameHUD      â”‚  â”‚
â”‚  â”‚ â€¢ 3D Scene     â”‚  â”‚       â”‚  â”‚ â€¢ 3D Scene     â”‚  â”‚
â”‚  â”‚   (Three.js)   â”‚  â”‚       â”‚  â”‚   (Three.js)   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                      â”‚       â”‚                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Diagrama 2: Flujo de AcciÃ³n Detallado

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Cliente  â”‚                                                     â”‚ Servidor â”‚
â”‚ (React)  â”‚                                                     â”‚ (Node)   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                                                     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚                                                                â”‚
     â”‚  1. Usuario hace clic en "Mover Personaje"                    â”‚
     â”‚     (handleMoveCharacter)                                     â”‚
     â”‚                                                                â”‚
     â”‚  2. Construye acciÃ³n (NO ejecuta reglas)                      â”‚
     â”‚     const action = {                                          â”‚
     â”‚       type: MOVE_CHARACTER,                                   â”‚
     â”‚       playerId: 'p1',                                         â”‚
     â”‚       characterId: 'char1',                                   â”‚
     â”‚       targetTileId: 'tile5'                                   â”‚
     â”‚     }                                                          â”‚
     â”‚                                                                â”‚
     â”‚  3. sendAction(action) â†’ SocketClient                         â”‚
     â”‚                                                                â”‚
     â”‚  4. socket.emit('message', {                                  â”‚
     â”‚       type: 'PLAYER_ACTION',                                  â”‚
     â”‚       roomId: 'room123',                                      â”‚
     â”‚       action: action                                          â”‚
     â”‚     })                                                         â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                                                                â”‚
     â”‚                                  5. SocketServer recibe mensajeâ”‚
     â”‚                                     handlePlayerAction()       â”‚
     â”‚                                                                â”‚
     â”‚                                  6. Obtiene GameRoom           â”‚
     â”‚                                     room = rooms.get('room123')â”‚
     â”‚                                                                â”‚
     â”‚                                  7. Validar turno              â”‚
     â”‚                                     if (currentPlayer !== p1) â”‚
     â”‚                                       return error             â”‚
     â”‚                                                                â”‚
     â”‚                                  8. Validar con GameRoom       â”‚
     â”‚                                     room.applyPlayerAction()   â”‚
     â”‚                                                                â”‚
     â”‚                                  9. GameRoom â†’ GameEngine      â”‚
     â”‚                                     engine.validateAction()    â”‚
     â”‚                                                                â”‚
     â”‚                                  10. ValidaciÃ³n OK             â”‚
     â”‚                                                                â”‚
     â”‚                                  11. Ejecutar en motor         â”‚
     â”‚                                      engine.applyAction()      â”‚
     â”‚                                                                â”‚
     â”‚                                  12. Motor actualiza estado    â”‚
     â”‚                                      newGameState = {...}      â”‚
     â”‚                                      events = [...]            â”‚
     â”‚                                                                â”‚
     â”‚                                  13. Broadcast a TODOS         â”‚
     â”‚                                      io.to(room).emit(...)     â”‚
     â”‚                                                                â”‚
     â”‚  14. GAME_STATE_UPDATE                                         â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚      {                                                         â”‚
     â”‚        type: 'GAME_STATE_UPDATE',                              â”‚
     â”‚        gameState: newGameState,                                â”‚
     â”‚        events: [...]                                           â”‚
     â”‚      }                                                          â”‚
     â”‚                                                                â”‚
     â”‚  15. SocketClient recibe mensaje                               â”‚
     â”‚      onGameStateUpdate(gameState, events)                      â”‚
     â”‚                                                                â”‚
     â”‚  16. NetworkStore actualiza                                    â”‚
     â”‚      set({ gameState, events })                                â”‚
     â”‚                                                                â”‚
     â”‚  17. React re-renderiza                                        â”‚
     â”‚      useNetworkStore(state => state.gameState)                 â”‚
     â”‚                                                                â”‚
     â”‚  18. UI muestra nuevo estado                                   â”‚
     â”‚      Personaje en nueva posiciÃ³n âœ“                             â”‚
     â”‚                                                                â”‚
```

---

## ğŸ“ Diagrama 3: CreaciÃ³n y UniÃ³n a Sala

```
Cliente 1                Servidor               Cliente 2
   â”‚                        â”‚                      â”‚
   â”‚  CREATE_ROOM           â”‚                      â”‚
   â”‚  { playerName: 'Alice' }                      â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                      â”‚
   â”‚                        â”‚                      â”‚
   â”‚           [Servidor crea GameRoom]            â”‚
   â”‚           [room = new GameRoom()]             â”‚
   â”‚           [room.addPlayer('Alice')]           â”‚
   â”‚                        â”‚                      â”‚
   â”‚  ROOM_CREATED          â”‚                      â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                      â”‚
   â”‚  { roomId: 'abc123',   â”‚                      â”‚
   â”‚    playerId: 'p1' }    â”‚                      â”‚
   â”‚                        â”‚                      â”‚
   â”‚                        â”‚  JOIN_ROOM           â”‚
   â”‚                        â”‚  { roomId: 'abc123', â”‚
   â”‚                        â”‚    playerName: 'Bob' }
   â”‚                        â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                        â”‚                      â”‚
   â”‚           [room.addPlayer('Bob')]             â”‚
   â”‚           [Asignar roles]                     â”‚
   â”‚           [Alice: HUMAN, Bob: ALIEN]          â”‚
   â”‚           [room.startGame()]                  â”‚
   â”‚                        â”‚                      â”‚
   â”‚  PLAYER_JOINED         â”‚  ROOM_JOINED         â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚  { player: Bob }       â”‚  { roomId, players } â”‚
   â”‚                        â”‚                      â”‚
   â”‚  GAME_STARTED          â”‚  GAME_STARTED        â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚  { gameState }         â”‚  { gameState }       â”‚
   â”‚                        â”‚                      â”‚
   â”‚  PLAYER_ROLE_ASSIGNED  â”‚  PLAYER_ROLE_ASSIGNEDâ”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚  { role: 'HUMAN' }     â”‚  { role: 'ALIEN' }   â”‚
   â”‚                        â”‚                      â”‚
   â”‚    [Ambos jugadores listos para jugar]        â”‚
   â”‚                        â”‚                      â”‚
```

---

## ğŸ“ Diagrama 4: Modelo de Datos

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      GameState                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ gameId: string                                        â”‚
â”‚ â€¢ turn: number                                          â”‚
â”‚ â€¢ phase: GamePhase                                      â”‚
â”‚ â€¢ currentPlayerId: PlayerId                             â”‚
â”‚                                                         â”‚
â”‚ â€¢ players: Player[]                                     â”‚
â”‚     â”œâ”€ id: PlayerId                                     â”‚
â”‚     â”œâ”€ name: string                                     â”‚
â”‚     â””â”€ role: PlayerRole (HUMAN | ALIEN)                 â”‚
â”‚                                                         â”‚
â”‚ â€¢ tiles: Map<TileId, Tile>                              â”‚
â”‚     â”œâ”€ id: TileId                                       â”‚
â”‚     â”œâ”€ type: TileType                                   â”‚
â”‚     â”œâ”€ coordinates: HexCoordinates                      â”‚
â”‚     â”œâ”€ explored: boolean                                â”‚
â”‚     â”œâ”€ destroyed: boolean                               â”‚
â”‚     â””â”€ building?: BuildingType                          â”‚
â”‚                                                         â”‚
â”‚ â€¢ ghettos: Map<GhettoId, Ghetto>                        â”‚
â”‚     â”œâ”€ id: GhettoId                                     â”‚
â”‚     â”œâ”€ name: string                                     â”‚
â”‚     â”œâ”€ tileId: TileId                                   â”‚
â”‚     â”œâ”€ controlStatus: GhettoControlStatus               â”‚
â”‚     â”œâ”€ population: number                               â”‚
â”‚     â”œâ”€ wounded: number                                  â”‚
â”‚     â”œâ”€ resources: ResourceInventory                     â”‚
â”‚     â”œâ”€ buildings: BuildingType[]                        â”‚
â”‚     â””â”€ characters: CharacterId[]                        â”‚
â”‚                                                         â”‚
â”‚ â€¢ characters: Map<CharacterId, Character>               â”‚
â”‚     â”œâ”€ id: CharacterId                                  â”‚
â”‚     â”œâ”€ type: CharacterType                              â”‚
â”‚     â”œâ”€ name: string                                     â”‚
â”‚     â”œâ”€ ghettoId: GhettoId                               â”‚
â”‚     â”œâ”€ tileId?: TileId                                  â”‚
â”‚     â”œâ”€ isWounded: boolean                               â”‚
â”‚     â”œâ”€ isUsed: boolean                                  â”‚
â”‚     â””â”€ canAct: boolean                                  â”‚
â”‚                                                         â”‚
â”‚ â€¢ alien: AlienState                                     â”‚
â”‚     â”œâ”€ shieldLevel: number                              â”‚
â”‚     â”œâ”€ controlTokens: number                            â”‚
â”‚     â”œâ”€ mothershipHealth: number                         â”‚
â”‚     â”œâ”€ mothershipShield: number                         â”‚
â”‚     â”œâ”€ currentTileId?: TileId                           â”‚
â”‚     â””â”€ hasAuxiliaryShip: boolean                        â”‚
â”‚                                                         â”‚
â”‚ â€¢ actionsThisTurn: string[]                             â”‚
â”‚ â€¢ gameOver: boolean                                     â”‚
â”‚ â€¢ victoryCondition?: VictoryCondition                   â”‚
â”‚ â€¢ winner?: PlayerRole                                   â”‚
â”‚ â€¢ rngSeed: number                                       â”‚
â”‚ â€¢ rngState: number                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Diagrama 5: Ciclo de Vida de una Sala

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            â”‚
â”‚  WAITING   â”‚  â† Sala creada, esperando jugadores
â”‚            â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”‚ [2 jugadores conectados]
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            â”‚
â”‚  STARTING  â”‚  â† Asignando roles, iniciando GameEngine
â”‚            â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”‚ [GameEngine.startGame() completo]
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            â”‚
â”‚IN_PROGRESS â”‚  â† Partida activa, procesando acciones
â”‚            â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”‚ [CondiciÃ³n de victoria alcanzada]
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            â”‚
â”‚  FINISHED  â”‚  â† Partida terminada, esperando limpieza
â”‚            â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”‚ [Todos los jugadores desconectados]
      â”‚ [O timeout de inactividad]
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            â”‚
â”‚ ABANDONED  â”‚  â† Sala eliminada por RoomManager
â”‚            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Diagrama 6: ValidaciÃ³n de AcciÃ³n en Cascada

```
Cliente envÃ­a acciÃ³n
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SocketServer       â”‚
â”‚ ValidaciÃ³n BÃ¡sica  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Â¿Socket vÃ¡lido?  â”‚ â†’ NO â†’ Rechazar
â”‚ â€¢ Â¿En una sala?    â”‚ â†’ NO â†’ Rechazar
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚ SÃ
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GameRoom           â”‚
â”‚ ValidaciÃ³n de Sala â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Â¿Jugador en sala?â”‚ â†’ NO â†’ Rechazar
â”‚ â€¢ Â¿Es su turno?    â”‚ â†’ NO â†’ Rechazar ("Not your turn")
â”‚ â€¢ Â¿Partida activa? â”‚ â†’ NO â†’ Rechazar
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚ SÃ
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GameEngine         â”‚
â”‚ ValidaciÃ³n LÃ³gica  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Â¿Fase correcta?  â”‚ â†’ NO â†’ Rechazar ("Wrong phase")
â”‚ â€¢ Â¿Rol permitido?  â”‚ â†’ NO â†’ Rechazar ("Wrong role")
â”‚ â€¢ Â¿Personaje OK?   â”‚ â†’ NO â†’ Rechazar ("Character invalid")
â”‚ â€¢ Â¿Recursos OK?    â”‚ â†’ NO â†’ Rechazar ("Not enough resources")
â”‚ â€¢ Â¿Objetivo vÃ¡lido?â”‚ â†’ NO â†’ Rechazar ("Invalid target")
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚ SÃ
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AcciÃ³n APLICADA    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Estado actualizado
â”‚ â€¢ Eventos generados
â”‚ â€¢ Broadcast a todos
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Diagrama 7: ReconexiÃ³n de Cliente

```
Cliente pierde conexiÃ³n
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Socket.IO detecta  â”‚
â”‚ disconnect event   â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Servidor:          â”‚
â”‚ â€¢ Mantiene GameRoomâ”‚
â”‚ â€¢ Mantiene GameState
â”‚ â€¢ Player marcado   â”‚
â”‚   como desconectadoâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ [Cliente reconecta]
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Socket.IO reconnectâ”‚
â”‚ automÃ¡tico         â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Cliente solicita:  â”‚
â”‚ REQUEST_SNAPSHOT   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ { roomId: 'xxx' }  â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Servidor envÃ­a:    â”‚
â”‚ GAME_STATE_SNAPSHOTâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ { gameState: {...} }
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Cliente actualiza: â”‚
â”‚ â€¢ GameState        â”‚
â”‚ â€¢ Jugadores        â”‚
â”‚ â€¢ Sala             â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â†“
    Listo para continuar jugando
```

---

## ğŸ“ Diagrama 8: GeneraciÃ³n de Dados (RNG)

```
                    SERVIDOR
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                       â”‚
â”‚  GameEngine                           â”‚
â”‚  â”œâ”€ rng: RandomGenerator              â”‚
â”‚  â”‚  â”œâ”€ seed: 12345                    â”‚
â”‚  â”‚  â””â”€ state: 54321                   â”‚
â”‚  â”‚                                    â”‚
â”‚  â””â”€ diceManager: DiceManager          â”‚
â”‚     â”œâ”€ roll(HUMAN_D6, rng)            â”‚
â”‚     â”‚  â””â”€ result = rng.nextInt(1, 6)  â”‚
â”‚     â”‚     â””â”€ return 4                 â”‚
â”‚     â”‚                                 â”‚
â”‚     â””â”€ roll(ALIEN_ATTACK, rng)        â”‚
â”‚        â””â”€ result = rng.choice([...])  â”‚
â”‚           â””â”€ return 'SHIELD'          â”‚
â”‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ Broadcast resultado
                â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
        â”‚               â”‚
   Cliente 1       Cliente 2
        â”‚               â”‚
        â†“               â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Recibe: â”‚     â”‚ Recibe: â”‚
   â”‚ result=4â”‚     â”‚ result=4â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚               â”‚
        â†“               â†“
   AnimaciÃ³n       AnimaciÃ³n
   del dado        del dado
   mostrando 4     mostrando 4
   
   
âŒ Cliente NUNCA hace:
   Math.random()
   engine.rollDice()
   generateRandom()
```

---

## ğŸ“ Diagrama 9: Stack TecnolÃ³gico Completo

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        FRONTEND                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  React + TypeScript                                          â”‚
â”‚  â”œâ”€ Components (UI)                                          â”‚
â”‚  â”œâ”€ Three.js (3D Graphics)                                   â”‚
â”‚  â”œâ”€ Zustand (State Management)                               â”‚
â”‚  â”œâ”€ Tailwind CSS (Styles)                                    â”‚
â”‚  â””â”€ Socket.IO Client (WebSocket)                             â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ WebSocket
                           â”‚ (Socket.IO)
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        BACKEND                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Node.js + TypeScript                                        â”‚
â”‚  â”œâ”€ Express (HTTP Server)                                    â”‚
â”‚  â”œâ”€ Socket.IO (WebSocket Server)                             â”‚
â”‚  â”œâ”€ GameRoomManager                                          â”‚
â”‚  â””â”€ GameRoom                                                 â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ Import/Require
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     GAME ENGINE                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Pure TypeScript (Sin dependencias)                          â”‚
â”‚  â”œâ”€ Core Engine (GameEngine)                                 â”‚
â”‚  â”œâ”€ State Management (Immutable)                             â”‚
â”‚  â”œâ”€ Action Reducers                                          â”‚
â”‚  â”œâ”€ Rule Validators                                          â”‚
â”‚  â”œâ”€ Phase Machine                                            â”‚
â”‚  â”œâ”€ RNG System (Seeded)                                      â”‚
â”‚  â””â”€ Dice Manager                                             â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Diagrama 10: ComparaciÃ³n Cliente vs Servidor

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                     â”‚
â”‚                         CLIENTE (React)                             â”‚
â”‚                                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  âœ… Renderiza UI                                                    â”‚
â”‚  âœ… Captura input del usuario                                       â”‚
â”‚  âœ… Construye acciones (GameAction)                                 â”‚
â”‚  âœ… EnvÃ­a mensajes al servidor                                      â”‚
â”‚  âœ… Recibe actualizaciones de estado                                â”‚
â”‚  âœ… Muestra animaciones y efectos visuales                          â”‚
â”‚  âœ… Reproduce sonidos                                               â”‚
â”‚                                                                     â”‚
â”‚  âŒ NO ejecuta GameEngine                                           â”‚
â”‚  âŒ NO modifica GameState                                           â”‚
â”‚  âŒ NO valida acciones con reglas                                   â”‚
â”‚  âŒ NO genera dados o aleatoriedad                                  â”‚
â”‚  âŒ NO calcula prÃ³ximo turno                                        â”‚
â”‚  âŒ NO resuelve combates                                            â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                     â”‚
â”‚                        SERVIDOR (Node.js)                           â”‚
â”‚                                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  âœ… Ejecuta GameEngine (motor completo)                             â”‚
â”‚  âœ… Valida TODAS las acciones                                       â”‚
â”‚  âœ… Aplica reglas del juego                                         â”‚
â”‚  âœ… Modifica GameState autoritativamente                            â”‚
â”‚  âœ… Genera dados con RNG                                            â”‚
â”‚  âœ… Calcula prÃ³ximo turno/fase                                      â”‚
â”‚  âœ… Resuelve combates                                               â”‚
â”‚  âœ… Detecta condiciones de victoria                                 â”‚
â”‚  âœ… Gestiona turnos y roles                                         â”‚
â”‚  âœ… Broadcast estado a todos los clientes                           â”‚
â”‚  âœ… Maneja reconexiones                                             â”‚
â”‚  âœ… Persiste estado (futuro)                                        â”‚
â”‚                                                                     â”‚
â”‚  âŒ NO renderiza UI                                                 â”‚
â”‚  âŒ NO conoce Three.js                                              â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Estos diagramas ilustran completamente la arquitectura del sistema multiplayer de JORUMI** ğŸ®âœ¨


